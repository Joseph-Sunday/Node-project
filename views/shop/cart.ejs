<%- include('../includes/head.ejs') %>

  <main>
    <% if (products.length > 0) { %>
      <ul class="main__ul">
        <% products.forEach(p => { %>
          <li class="cart__items">
            <h2> <%= p.productId.title %></h2>
            <!-- NB: with sequelize method, the Quantity: has a p.cartitems before the quantity -->
            <h2>Quantity: <%= p.quantity %></h2> 
            <form action="/cart-delete-item" method="POST">
              <input type="hidden" name="_csrf" value="<%= csrfToken %>">
              <input type="hidden" value="<%= p.productId._id %>" name="productId">
              <button class="main-card__btn-delete" type="submit">Delete</button>
            </form>
          </li>
        <% }) %>
      </ul>
      <div class="center">
        <!-- <form action="/create-order" method="POST">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <button class="main-card__button" type="submit">Order Now!</button>
        </form> -->
        <div>
          <a href="/checkout" class="main-card__button">
            Order Now
          </a>
        </div>
      </div>
    <% } else { %>
      <section class="main__section">
          <img src="/main_images/uncharted4.jpg" alt="Empty" class="main-section__image" width="200px" height="200px">
          <h3 class="main-section__h3">Your Cart is Empty!</h3>
          <p class="main-section__p">Browse our categories and discover our best deals..</p>
              <a href="/">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button class="main-section__btn" type="button">Start Shopping</button>
              </a>
      </section>
    <% } %>
    </div>

  </main>

<%- include('../includes/end.ejs') %>